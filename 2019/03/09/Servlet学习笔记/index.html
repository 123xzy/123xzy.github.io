<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="web,servlet," />










<meta name="description" content="学习Javaweb真的阐述了基础不牢，地动山摇，太吃力了，啥都不知道，就上框架，因此回炉重修">
<meta name="keywords" content="web,servlet">
<meta property="og:type" content="article">
<meta property="og:title" content="Servlet学习笔记">
<meta property="og:url" content="http://yoursite.com/2019/03/09/Servlet学习笔记/index.html">
<meta property="og:site_name" content="阿谢的BLOG">
<meta property="og:description" content="学习Javaweb真的阐述了基础不牢，地动山摇，太吃力了，啥都不知道，就上框架，因此回炉重修">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2019/03/09/Servlet学习笔记/1.jpg">
<meta property="og:image" content="http://yoursite.com/2019/03/09/Servlet学习笔记/2.jpg">
<meta property="og:updated_time" content="2019-03-11T02:21:50.607Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Servlet学习笔记">
<meta name="twitter:description" content="学习Javaweb真的阐述了基础不牢，地动山摇，太吃力了，啥都不知道，就上框架，因此回炉重修">
<meta name="twitter:image" content="http://yoursite.com/2019/03/09/Servlet学习笔记/1.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/09/Servlet学习笔记/"/>





  <title>Servlet学习笔记 | 阿谢的BLOG</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">阿谢的BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/Life" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Life
          </a>
        </li>
      
        
        <li class="menu-item menu-item-theory">
          <a href="/Theory" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Theory
          </a>
        </li>
      
        
        <li class="menu-item menu-item-practice">
          <a href="/Practice" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Practice
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/About" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/09/Servlet学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="123xzy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿谢的BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Servlet学习笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-09T23:13:59+08:00">
                2019-03-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>学习Javaweb真的阐述了<strong>基础不牢，地动山摇</strong>，太吃力了，啥都不知道，就上框架，因此回炉重修<br><a id="more"></a></p>
<hr>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>用户使用浏览器访问网页就是发送HTTP请求，web服务器响应请求的过程。所以解析HTTP的工作就交给web服务器了。web服务器有很多，Tomcat是一款小巧灵活并使用最多的Web应用服务器</p>
<p>因此像网络协议、HTTP，servlet根本不管！也管不着！那servlet是干嘛的？很简单，接口的作用是什么？规范呗！servlet接口定义的是一套处理网络请求的规范，所有实现servlet的类，都需要实现它那五个方法，其中最主要的是两个生命周期方法init()和destroy()，还有一个处理请求的service()，也就是说，所有实现servlet接口的类，或者说，所有想要处理网络请求的类，都需要回答这三个问题：</p>
<ul>
<li>你初始化时要做什么</li>
<li>你销毁时要做什么</li>
<li>你接受到请求时要做什么</li>
</ul>
<p>servlet是一个规范，那实现了servlet的类，就能处理请求了吗？servlet不会直接和客户端打交道！那请求怎么来到servlet呢？</p>
<p>答案是servlet容器。Servlet与Servlet容器的关系有点像枪和子弹的关系。从技术角度来说是为了解耦，通过标准化接口来相互协作。Servlet容器作为一个独立发展的标准化产品，目前它的种类很多，但是它们都有自己的市场定位，很难说谁优谁劣，各有特点。例如现在比较流行的 Jetty，在定制化和移动领域有不错的发展</p>
<p>但最常用还是Tomcat。Tomcat才是与客户端直接打交道的家伙，他监听了端口，请求过来后，根据url等信息，确定要将请求交给哪个servlet去处理，然后调用那个servlet的service方法，service方法返回一个response对象，tomcat再把这个response返回给客户端</p>
<p>Java Servlet通常情况下与使用CGI（Common Gateway Interface，公共网关接口）实现的程序可以达到异曲同工的效果。但是相比于CGI，Servlet有以下几点优势：</p>
<ul>
<li>性能明显更好</li>
<li>Servlet在Web服务器的地址空间内执行。这样它就没有必要再创建一个单独的进程来处理每个客户端请求</li>
<li>Servlet是独立于平台的，因为它们是用Java编写的</li>
<li>服务器上的Java安全管理器执行了一系列限制，以保护服务器计算机上的资源。因此，Servlet是可信的</li>
<li>Java类库的全部功能对Servlet来说都是可用的。它可以通过sockets和RMI机制与applets、数据库或其他软件进行交互<br><img src="/2019/03/09/Servlet学习笔记/1.jpg" alt="Servlet架构"></li>
</ul>
<p>Servlet执行以下主要任务：</p>
<ul>
<li>读取客户端（浏览器）发送的显式的数据。这包括网页上的HTML表单，或者也可以是来自applet或自定义的HTTP客户端程序的表单</li>
<li>读取客户端（浏览器）发送的隐式的HTTP请求数据。这包括cookies、媒体类型和浏览器能理解的压缩格式等等</li>
<li>处理数据并生成结果。这个过程可能需要访问数据库，执行RMI或CORBA调用，调用Web服务，或者直接计算得出对应的响应</li>
<li>发送显式的数据（即文档）到客户端（浏览器）。该文档的格式可以是多种多样的，包括文本文件（HTML或XML）、二进制文件（GIF图像）、Excel等</li>
<li>发送隐式的HTTP响应到客户端（浏览器）。这包括告诉浏览器或其他客户端被返回的文档类型（例如 HTML），设置cookies和缓存参数，以及其他类似的任务</li>
</ul>
<h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><p>Servlet生命周期可被定义为从创建直到毁灭的整个过程。以下是Servlet遵循的过程：</p>
<ul>
<li>Servlet通过调用init()方法进行初始化</li>
<li>Servlet 调用service()方法来处理客户端的请求</li>
<li>Servlet 通过调用destroy()方法终止（结束）</li>
<li>最后，Servlet是由JVM的垃圾回收器进行垃圾回收的</li>
</ul>
<h2 id="init"><a href="#init" class="headerlink" title="init()"></a>init()</h2><p>init方法被设计成只调用一次。它在第一次创建Servlet时被调用，在后续每次用户请求时不再调用</p>
<p>Servlet创建于用户第一次调用对应于该Servlet的URL时，但是您也可以指定Servlet在服务器第一次启动时被加载</p>
<p>当用户调用一个Servlet时，就会创建一个Servlet实例，每一个用户请求都会产生一个新的线程，适当的时候移交给doGet或doPost方法。init() 方法简单地创建或加载一些数据，这些数据将被用于Servlet的整个生命周期</p>
<h2 id="service"><a href="#service" class="headerlink" title="service()"></a>service()</h2><p>service()方法是执行实际任务的主要方法。Servlet容器（即Web服务器）调用service()方法来处理来自客户端（浏览器）的请求，并把格式化的响应写回给客户端</p>
<p>每次服务器接收到一个Servlet请求时，服务器会产生一个新的线程并调用服务。service() 方法检查HTTP请求类型（GET、POST、PUT、DELETE 等），并在适当的时候调用doGet、doPost、doPut、doDelete等方法</p>
<p>service()方法由容器调用，service方法在适当的时候调用 doGet、doPost、doPut、doDelete等方法。所以，您不用对service()方法做任何动作，您只需要根据来自客户端的请求类型来重写doGet()或doPost()即可</p>
<ul>
<li>doGet()：GET请求来自于一个URL的正常请求，或者来自于一个未指定METHOD的HTML表单，它由doGet()方法处理</li>
<li>doPost()：POST请求来自于一个特别指定了METHOD为POST的HTML表单，它由doPost()方法处理</li>
</ul>
<h2 id="destroy"><a href="#destroy" class="headerlink" title="destroy()"></a>destroy()</h2><p>destroy()方法只会被调用一次，在Servlet生命周期结束时被调用。destroy()方法可以让您的 Servlet 关闭数据库连接、停止后台线程、把Cookie列表或点击计数器写入到磁盘，并执行其他类似的清理活动。</p>
<p>在调用destroy()方法之后，servlet对象被标记为垃圾回收</p>
<p><img src="/2019/03/09/Servlet学习笔记/2.jpg" alt="架构"></p>
<h1 id="表单数据"><a href="#表单数据" class="headerlink" title="表单数据"></a>表单数据</h1><p>浏览器使用两种方法可将这些信息传递到Web服务器，分别为GET方法和POST方法</p>
<p>Servlet处理表单数据，这些数据会根据不同的情况使用不同的方法自动解析：</p>
<ul>
<li>getParameter()：您可以调用request.getParameter()方法来获取表单参数的值。</li>
<li>getParameterValues()：如果参数出现一次以上，则调用该方法，并返回多个值，例如复选框</li>
<li>getParameterNames()：如果您想要得到当前请求中的所有参数的完整列表，则调用该方法</li>
</ul>
<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><p><code>&lt;form&gt;</code>标签是HTML的原生标签，主要用来向服务器传输数据，一个form表单如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;url&quot; method=&quot;GET&quot;&gt;&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中action代表该表单数据要提交到的服务器地址，method表示提交方式，一般有 GET、POST。<code>&lt;form&gt;</code>只是包裹输入数据的标签而已，要有输入框才能提交，所以这时候需要有input</p>
<h2 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h2><p>GET方法向页面请求发送已编码的用户信息。页面和已编码的信息中间用?字符分隔</p>
<p>GET方法是默认的从浏览器向Web服务器传递信息的方法，它会产生一个很长的字符串，出现在浏览器的地址栏中。如果您要向服务器传递的是密码或其他的敏感信息，请不要使用GET方法。GET方法有大小限制：请求字符串中最多只能有1024个字符</p>
<p>这些信息使用QUERY_STRING头传递，并可以通过QUERY_STRING环境变量访问，Servlet使用 doGet()方法处理这种类型的请求</p>
<h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><p>另一个向后台程序传递信息的比较可靠的方法是POST方法。POST方法打包信息的方式与GET方法基本相同，但是POST方法不是把信息作为URL中?字符后的文本字符串进行发送，而是把这些信息作为一个单独的消息。消息以标准输出的形式传到后台程序，您可以解析和使用这些标准输出。Servlet使用doPost()方法处理这种类型的请求</p>
<h1 id="客户端HTTP请求"><a href="#客户端HTTP请求" class="headerlink" title="客户端HTTP请求"></a>客户端HTTP请求</h1><p>当浏览器请求网页时，它会向Web服务器发送特定信息，这些信息不能被直接读取，因为这些信息是作为HTTP请求的头的一部分进行传输的</p>
<h2 id="HTTP头信息"><a href="#HTTP头信息" class="headerlink" title="HTTP头信息"></a>HTTP头信息</h2><table>
<thead>
<tr>
<th>头信息</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept</td>
<td style="text-align:center">这个头信息指定浏览器或其他客户端可以处理的 MIME 类型。值 image/png 或 image/jpeg 是最常见的两种可能值</td>
</tr>
<tr>
<td>Accept-Charset</td>
<td style="text-align:center">这个头信息指定浏览器可以用来显示信息的字符集。例如 ISO-8859-1。</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td style="text-align:center">这个头信息指定浏览器知道如何处理的编码类型。值 gzip 或 compress 是最常见的两种可能值。</td>
</tr>
<tr>
<td>Accept-Language</td>
<td style="text-align:center">这个头信息指定客户端的首选语言，在这种情况下，Servlet 会产生多种语言的结果。例如，en、en-us、ru 等。</td>
</tr>
<tr>
<td>Authorization</td>
<td style="text-align:center">这个头信息用于客户端在访问受密码保护的网页时识别自己的身份。</td>
</tr>
<tr>
<td>Connection</td>
<td style="text-align:center">这个头信息指示客户端是否可以处理持久 HTTP 连接。持久连接允许客户端或其他浏览器通过单个请求来检索多个文件。值 Keep-Alive 意味着使用了持续连接。</td>
</tr>
<tr>
<td>Content-Length</td>
<td style="text-align:center">这个头信息只适用于 POST 请求，并给出 POST 数据的大小（以字节为单位）。</td>
</tr>
<tr>
<td>Cookie</td>
<td style="text-align:center">这个头信息把之前发送到浏览器的 cookies 返回到服务器。</td>
</tr>
<tr>
<td>Host</td>
<td style="text-align:center">这个头信息指定原始的 URL 中的主机和端口。</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td style="text-align:center">这个头信息表示只有当页面在指定的日期后已更改时，客户端想要的页面。如果没有新的结果可以使用，服务器会发送一个 304 代码，表示 Not Modified 头信息。</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td style="text-align:center">这个头信息是 If-Modified-Since 的对立面，它指定只有当文档早于指定日期时，操作才会成功。</td>
</tr>
<tr>
<td>Referer</td>
<td style="text-align:center">这个头信息指示所指向的 Web 页的 URL。例如，如果您在网页 1，点击一个链接到网页 2，当浏览器请求网页 2 时，网页 1 的 URL 就会包含在 Referer 头信息中。</td>
</tr>
<tr>
<td>User-Agent</td>
<td style="text-align:center">这个头信息识别发出请求的浏览器或其他客户端，并可以向不同类型的浏览器返回不同的内容。</td>
</tr>
</tbody>
</table>
<h2 id="读取头信息"><a href="#读取头信息" class="headerlink" title="读取头信息"></a>读取头信息</h2><p>这些方法通过HttpServletRequest对象获得</p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cookie[] getCookies()</td>
<td style="text-align:center">返回一个数组，包含客户端发送该请求的所有的 Cookie 对象。</td>
</tr>
<tr>
<td>Enumeration getAttributeNames()</td>
<td style="text-align:center">返回一个枚举，包含提供给该请求可用的属性名称。</td>
</tr>
<tr>
<td>Enumeration getHeaderNames()</td>
<td style="text-align:center">返回一个枚举，包含在该请求中包含的所有的头名。</td>
</tr>
<tr>
<td>Enumeration getParameterNames()</td>
<td style="text-align:center">返回一个 String 对象的枚举，包含在该请求中包含的参数的名称。</td>
</tr>
<tr>
<td>HttpSession getSession()</td>
<td style="text-align:center">返回与该请求关联的当前 session 会话，或者如果请求没有 session 会话，则创建一个。</td>
</tr>
<tr>
<td>HttpSession getSession(boolean create)</td>
<td style="text-align:center">返回与该请求关联的当前 HttpSession，或者如果没有当前会话，且创建是真的，则返回一个新的 session 会话。</td>
</tr>
<tr>
<td>Locale getLocale()</td>
<td style="text-align:center">基于 Accept-Language 头，返回客户端接受内容的首选的区域设置。</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td style="text-align:center">以对象形式返回已命名属性的值，如果没有给定名称的属性存在，则返回 null。</td>
</tr>
<tr>
<td>ServletInputStream getInputStream()</td>
<td style="text-align:center">使用 ServletInputStream，以二进制数据形式检索请求的主体。</td>
</tr>
<tr>
<td>String getAuthType()</td>
<td style="text-align:center">返回用于保护 Servlet 的身份验证方案的名称，例如，”BASIC” 或 “SSL”，如果JSP没有受到保护则返回 null。</td>
</tr>
<tr>
<td>String getCharacterEncoding()</td>
<td style="text-align:center">返回请求主体中使用的字符编码的名称。</td>
</tr>
<tr>
<td>String getContentType()</td>
<td style="text-align:center">返回请求主体的 MIME 类型，如果不知道类型则返回 null。</td>
</tr>
<tr>
<td>String getContextPath()</td>
<td style="text-align:center">返回指示请求上下文的请求 URI 部分。</td>
</tr>
<tr>
<td>String getHeader(String name)</td>
<td style="text-align:center">以字符串形式返回指定的请求头的值。</td>
</tr>
<tr>
<td>String getMethod()</td>
<td style="text-align:center">返回请求的 HTTP 方法的名称，例如，GET、POST 或 PUT。</td>
</tr>
<tr>
<td>String getParameter(String name)</td>
<td style="text-align:center">以字符串形式返回请求参数的值，或者如果参数不存在则返回 null。</td>
</tr>
<tr>
<td>String getPathInfo()</td>
<td style="text-align:center">当请求发出时，返回与客户端发送的 URL 相关的任何额外的路径信息。</td>
</tr>
<tr>
<td>String getProtocol()</td>
<td style="text-align:center">返回请求协议的名称和版本。</td>
</tr>
<tr>
<td>String getQueryString()</td>
<td style="text-align:center">返回包含在路径后的请求 URL 中的查询字符串。</td>
</tr>
<tr>
<td>String getRemoteAddr()</td>
<td style="text-align:center">返回发送请求的客户端的互联网协议（IP）地址。</td>
</tr>
<tr>
<td>String getRemoteHost()</td>
<td style="text-align:center">返回发送请求的客户端的完全限定名称。</td>
</tr>
<tr>
<td>String getRemoteUser()</td>
<td style="text-align:center">如果用户已通过身份验证，则返回发出请求的登录用户，或者如果用户未通过身份验证，则返回 null。</td>
</tr>
<tr>
<td>String getRequestURI()</td>
<td style="text-align:center">从协议名称直到 HTTP 请求的第一行的查询字符串中，返回该请求的 URL 的一部分。</td>
</tr>
<tr>
<td>String getRequestedSessionId()</td>
<td style="text-align:center">返回由客户端指定的 session 会话 ID。</td>
</tr>
<tr>
<td>String getServletPath()</td>
<td style="text-align:center">返回调用 JSP 的请求的 URL 的一部分。</td>
</tr>
<tr>
<td>String[] getParameterValues(String name)</td>
<td style="text-align:center">返回一个字符串对象的数组，包含所有给定的请求参数的值，如果参数不存在则返回 null。</td>
</tr>
<tr>
<td>boolean isSecure()</td>
<td style="text-align:center">返回一个布尔值，指示请求是否使用安全通道，如 HTTPS。</td>
</tr>
<tr>
<td>int getContentLength()</td>
<td style="text-align:center">以字节为单位返回请求主体的长度，并提供输入流，或者如果长度未知则返回 -1。</td>
</tr>
<tr>
<td>int getIntHeader(String name)</td>
<td style="text-align:center">返回指定的请求头的值为一个 int 值。</td>
</tr>
<tr>
<td>int getServerPort()</td>
<td style="text-align:center">返回接收到这个请求的端口号。</td>
</tr>
<tr>
<td>int getParameterMap()</td>
<td style="text-align:center">将参数封装成 Map 类型。</td>
</tr>
</tbody>
</table>
<h1 id="服务器HTTP响应"><a href="#服务器HTTP响应" class="headerlink" title="服务器HTTP响应"></a>服务器HTTP响应</h1><p>当一个Web服务器响应一个HTTP请求时，响应通常包括一个状态行、一些响应报头、一个空行和文档</p>
<h2 id="响应报头"><a href="#响应报头" class="headerlink" title="响应报头"></a>响应报头</h2><table>
<thead>
<tr>
<th>头信息</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Allow</td>
<td style="text-align:center">这个头信息指定服务器支持的请求方法（GET、POST 等）。</td>
</tr>
<tr>
<td>Cache-Control</td>
<td style="text-align:center">这个头信息指定响应文档在何种情况下可以安全地缓存。可能的值有：public、private 或 no-cache 等。Public 意味着文档是可缓存，Private 意味着文档是单个用户私用文档，且只能存储在私有（非共享）缓存中，no-cache 意味着文档不应被缓存。</td>
</tr>
<tr>
<td>Connection</td>
<td style="text-align:center">这个头信息指示浏览器是否使用持久 HTTP 连接。值 close 指示浏览器不使用持久 HTTP 连接，值 keep-alive 意味着使用持久连接。</td>
</tr>
<tr>
<td>Content-Disposition</td>
<td style="text-align:center">这个头信息可以让您请求浏览器要求用户以给定名称的文件把响应保存到磁盘。</td>
</tr>
<tr>
<td>Content-Encoding</td>
<td style="text-align:center">在传输过程中，这个头信息指定页面的编码方式。</td>
</tr>
<tr>
<td>Content-Language</td>
<td style="text-align:center">这个头信息表示文档编写所使用的语言。例如，en、en-us、ru 等。</td>
</tr>
<tr>
<td>Content-Length</td>
<td style="text-align:center">这个头信息指示响应中的字节数。只有当浏览器使用持久（keep-alive）HTTP 连接时才需要这些信息。</td>
</tr>
<tr>
<td>Content-Type</td>
<td style="text-align:center">这个头信息提供了响应文档的 MIME（Multipurpose Internet Mail Extension）类型。</td>
</tr>
<tr>
<td>Expires</td>
<td style="text-align:center">这个头信息指定内容过期的时间，在这之后内容不再被缓存。</td>
</tr>
<tr>
<td>Last-Modified</td>
<td style="text-align:center">这个头信息指示文档的最后修改时间。然后，客户端可以缓存文件，并在以后的请求中通过 If-Modified-Since 请求头信息提供一个日期。</td>
</tr>
<tr>
<td>Location</td>
<td style="text-align:center">这个头信息应被包含在所有的带有状态码的响应中。在 300s 内，这会通知浏览器文档的地址。浏览器会自动重新连接到这个位置，并获取新的文档。</td>
</tr>
<tr>
<td>Refresh</td>
<td style="text-align:center">这个头信息指定浏览器应该如何尽快请求更新的页面。您可以指定页面刷新的秒数。</td>
</tr>
<tr>
<td>Retry-After</td>
<td style="text-align:center">这个头信息可以与 503（Service Unavailable 服务不可用）响应配合使用，这会告诉客户端多久就可以重复它的请求。</td>
</tr>
<tr>
<td>Set-Cookie</td>
<td style="text-align:center">这个头信息指定一个与页面关联的cookie。</td>
</tr>
</tbody>
</table>
<h2 id="设置响应报头"><a href="#设置响应报头" class="headerlink" title="设置响应报头"></a>设置响应报头</h2><p>下面的方法可用于在Servlet程序中设置HTTP响应报头。这些方法通过 HttpServletResponse对象可用</p>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>String encodeRedirectURL(String url)</td>
<td style="text-align:center">为sendRedirect 方法中使用的指定的 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td>
</tr>
<tr>
<td>String encodeURL(String url)</td>
<td style="text-align:center">对包含 session 会话 ID 的指定 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td>
</tr>
<tr>
<td>boolean containsHeader(String name)</td>
<td style="text-align:center">返回一个布尔值，指示是否已经设置已命名的响应报头。</td>
</tr>
<tr>
<td>boolean isCommitted()</td>
<td style="text-align:center">返回一个布尔值，指示响应是否已经提交。</td>
</tr>
<tr>
<td>void addCookie(Cookie cookie)</td>
<td style="text-align:center">把指定的 cookie 添加到响应。</td>
</tr>
<tr>
<td>void addDateHeader(String name, long date)</td>
<td style="text-align:center">添加一个带有给定的名称和日期值的响应报头。</td>
</tr>
<tr>
<td>void addHeader(String name, String value)</td>
<td style="text-align:center">添加一个带有给定的名称和值的响应报头。</td>
</tr>
<tr>
<td>void addIntHeader(String name, int value)</td>
<td style="text-align:center">添加一个带有给定的名称和整数值的响应报头。</td>
</tr>
<tr>
<td>void flushBuffer()</td>
<td style="text-align:center">强制任何在缓冲区中的内容被写入到客户端。</td>
</tr>
<tr>
<td>void reset()</td>
<td style="text-align:center">清除缓冲区中存在的任何数据，包括状态码和头。</td>
</tr>
<tr>
<td>void resetBuffer()</td>
<td style="text-align:center">清除响应中基础缓冲区的内容，不清除状态码和头。</td>
</tr>
<tr>
<td>void sendError(int sc)</td>
<td style="text-align:center">使用指定的状态码发送错误响应到客户端，并清除缓冲区。</td>
</tr>
<tr>
<td>void sendError(int sc, String msg)</td>
<td style="text-align:center">使用指定的状态发送错误响应到客户端。</td>
</tr>
<tr>
<td>void sendRedirect(String location)</td>
<td style="text-align:center">使用指定的重定向位置 URL 发送临时重定向响应到客户端。</td>
</tr>
<tr>
<td>void setBufferSize(int size)</td>
<td style="text-align:center">为响应主体设置首选的缓冲区大小。</td>
</tr>
<tr>
<td>void setCharacterEncoding(String charset)</td>
<td style="text-align:center">设置被发送到客户端的响应的字符编码（MIME 字符集）例如，UTF-8。</td>
</tr>
<tr>
<td>void setContentLength(int len)</td>
<td style="text-align:center">设置在 HTTP Servlet 响应中的内容主体的长度，该方法设置 HTTP Content-Length 头。</td>
</tr>
<tr>
<td>void setContentType(String type)</td>
<td style="text-align:center">如果响应还未被提交，设置被发送到客户端的响应的内容类型。</td>
</tr>
<tr>
<td>void setDateHeader(String name, long date)</td>
<td style="text-align:center">设置一个带有给定的名称和日期值的响应报头。</td>
</tr>
<tr>
<td>void setHeader(String name, String value)</td>
<td style="text-align:center">设置一个带有给定的名称和值的响应报头。</td>
</tr>
<tr>
<td>void setIntHeader(String name, int value)</td>
<td style="text-align:center">设置一个带有给定的名称和整数值的响应报头。</td>
</tr>
<tr>
<td>void setLocale(Locale loc)</td>
<td style="text-align:center">如果响应还未被提交，设置响应的区域。</td>
</tr>
<tr>
<td>void setStatus(int sc)</td>
<td style="text-align:center">为该响应设置状态码。</td>
</tr>
</tbody>
</table>
<h1 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h1><h2 id="状态码含义"><a href="#状态码含义" class="headerlink" title="状态码含义"></a>状态码含义</h2><table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:center">消息</th>
<th style="text-align:right">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td style="text-align:center">Continue</td>
<td style="text-align:right">只有请求的一部分已经被服务器接收，但只要它没有被拒绝，客户端应继续该请求。</td>
</tr>
<tr>
<td>101</td>
<td style="text-align:center">Switching Protocols</td>
<td style="text-align:right">服务器切换协议。</td>
</tr>
<tr>
<td>200</td>
<td style="text-align:center">OK</td>
<td style="text-align:right">请求成功。</td>
</tr>
<tr>
<td>201</td>
<td style="text-align:center">Created</td>
<td style="text-align:right">该请求是完整的，并创建一个新的资源。</td>
</tr>
<tr>
<td>202</td>
<td style="text-align:center">Accepted</td>
<td style="text-align:right">该请求被接受处理，但是该处理是不完整的。</td>
</tr>
<tr>
<td>203</td>
<td style="text-align:center">Non-authoritative</td>
<td style="text-align:right">Information     </td>
</tr>
<tr>
<td>204</td>
<td style="text-align:center">No Content</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>205</td>
<td style="text-align:center">Reset Content</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>206</td>
<td style="text-align:center">Partial Content</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>300</td>
<td style="text-align:center">Multiple Choices</td>
<td style="text-align:right">链接列表。用户可以选择一个链接，进入到该位置。最多五个地址。</td>
</tr>
<tr>
<td>301</td>
<td style="text-align:center">Moved Permanently</td>
<td style="text-align:right">所请求的页面已经转移到一个新的 URL。</td>
</tr>
<tr>
<td>302</td>
<td style="text-align:center">Found</td>
<td style="text-align:right">所请求的页面已经临时转移到一个新的 URL。</td>
</tr>
<tr>
<td>303</td>
<td style="text-align:center">See Other</td>
<td style="text-align:right">所请求的页面可以在另一个不同的 URL 下被找到。</td>
</tr>
<tr>
<td>304</td>
<td style="text-align:center">Not Modified</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>305</td>
<td style="text-align:center">Use Proxy</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>306</td>
<td style="text-align:center">Unused</td>
<td style="text-align:right">在以前的版本中使用该代码。现在已不再使用它，但代码仍被保留。</td>
</tr>
<tr>
<td>307</td>
<td style="text-align:center">Temporary Redirect</td>
<td style="text-align:right">所请求的页面已经临时转移到一个新的 URL。</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">Bad Request</td>
<td style="text-align:right">服务器不理解请求。</td>
</tr>
<tr>
<td>401</td>
<td style="text-align:center">Unauthorized</td>
<td style="text-align:right">所请求的页面需要用户名和密码。</td>
</tr>
<tr>
<td>402</td>
<td style="text-align:center">Payment Required</td>
<td style="text-align:right">您还不能使用该代码。</td>
</tr>
<tr>
<td>403</td>
<td style="text-align:center">Forbidden</td>
<td style="text-align:right">禁止访问所请求的页面。</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">Not Found</td>
<td style="text-align:right">服务器无法找到所请求的页面。.</td>
</tr>
<tr>
<td>405</td>
<td style="text-align:center">Method Not Allowed</td>
<td style="text-align:right">在请求中指定的方法是不允许的。</td>
</tr>
<tr>
<td>406</td>
<td style="text-align:center">Not Acceptable</td>
<td style="text-align:right">服务器只生成一个不被客户端接受的响应。</td>
</tr>
<tr>
<td>407</td>
<td style="text-align:center">Proxy Authentication Required</td>
<td style="text-align:right">在请求送达之前，您必须使用代理服务器的验证。</td>
</tr>
<tr>
<td>408</td>
<td style="text-align:center">Request Timeout</td>
<td style="text-align:right">请求需要的时间比服务器能够等待的时间长，超时。</td>
</tr>
<tr>
<td>409</td>
<td style="text-align:center">Conflict</td>
<td style="text-align:right">请求因为冲突无法完成。</td>
</tr>
<tr>
<td>410</td>
<td style="text-align:center">Gone</td>
<td style="text-align:right">所请求的页面不再可用。</td>
</tr>
<tr>
<td>411</td>
<td style="text-align:center">Length Required</td>
<td style="text-align:right">“Content-Length” 未定义。服务器无法处理客户端发送的不带 Content-Length 的请求信息。</td>
</tr>
<tr>
<td>412</td>
<td style="text-align:center">Precondition Failed</td>
<td style="text-align:right">请求中给出的先决条件被服务器评估为 false。</td>
</tr>
<tr>
<td>413</td>
<td style="text-align:center">Request Entity Too Large</td>
<td style="text-align:right">服务器不接受该请求，因为请求实体过大。</td>
</tr>
<tr>
<td>414</td>
<td style="text-align:center">Request-url Too Long</td>
<td style="text-align:right">服务器不接受该请求，因为 URL 太长。当您转换一个 “post” 请求为一个带有长的查询信息的 “get” 请求时发生。</td>
</tr>
<tr>
<td>415</td>
<td style="text-align:center">Unsupported Media Type</td>
<td style="text-align:right">服务器不接受该请求，因为媒体类型不被支持。</td>
</tr>
<tr>
<td>417</td>
<td style="text-align:center">Expectation Failed</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>500</td>
<td style="text-align:center">Internal Server Error</td>
<td style="text-align:right">未完成的请求。服务器遇到了一个意外的情况。</td>
</tr>
<tr>
<td>501</td>
<td style="text-align:center">Not Implemented</td>
<td style="text-align:right">未完成的请求。服务器不支持所需的功能。</td>
</tr>
<tr>
<td>502</td>
<td style="text-align:center">Bad Gateway</td>
<td style="text-align:right">未完成的请求。服务器从上游服务器收到无效响应。</td>
</tr>
<tr>
<td>503</td>
<td style="text-align:center">Service Unavailable</td>
<td style="text-align:right">未完成的请求。服务器暂时超载或死机。</td>
</tr>
<tr>
<td>504</td>
<td style="text-align:center">Gateway Timeout</td>
<td style="text-align:right">网关超时。</td>
</tr>
<tr>
<td>505</td>
<td style="text-align:center">HTTP Version Not Supported</td>
<td style="text-align:right">服务器不支持”HTTP协议”版本。</td>
</tr>
</tbody>
</table>
<h2 id="设置状态码"><a href="#设置状态码" class="headerlink" title="设置状态码"></a>设置状态码</h2><p>下面的方法可用于在Servlet程序中设置HTTP状态码。这些方法通过HttpServletResponse 对象获取</p>
<ul>
<li><code>public void setStatus (int statusCode)</code>：该方法设置一个任意的状态码。setStatus方法接受一个 int（状态码）作为参数。如果您的响应包含了一个特殊的状态码和文档，请确保在使用 PrintWriter 实际返回任何内容之前调用setStatus</li>
<li><code>public void sendRedirect(String url)</code>：该方法生成一个 302 响应，连同一个带有新文档 URL 的 Location 头。</li>
<li><code>public void sendError(int code, String message)</code>：该方法发送一个状态码（通常为 404），连同一个在 HTML 文档内部自动格式化并发送到客户端的短消息。</li>
</ul>
<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><p>Servlet过滤器可以动态地拦截请求和响应，以变换或使用包含在请求或响应中的信息</p>
<p>Servlet过滤器是可用于Servlet编程的Java类，可以实现以下目的：</p>
<ul>
<li>在客户端的请求访问后端资源之前，拦截这些请求。</li>
<li>在服务器的响应发送回客户端之前，处理这些响应。</li>
</ul>
<p>过滤器通过Web部署描述符（web.xml）中的XML 标签来声明，然后映射到您的应用程序的部署描述符中的Servlet名称或URL模式。当Web容器启动Web应用程序时，它会为您在部署描述符中声明的每一个过滤器创建一个实例</p>
<p>Filter的执行顺序与在web.xml配置文件中的配置顺序一致，一般把Filter配置在所有的Servlet之前</p>
<p>过滤器是一个实现了javax.servlet.Filter接口的Java类。javax.servlet.Filter 接口定义了三个方法：</p>
<ul>
<li><code>public void doFilter (ServletRequest, ServletResponse, FilterChain)</code>：该方法完成实际的过滤操作，当客户端请求方法与过滤器设置匹配的URL时，Servlet容器将先调用过滤器的doFilter方法。FilterChain用户访问后续过滤器</li>
<li><p><code>public void init(FilterConfig filterConfig)</code>：web应用程序启动时，web服务器将创建Filter的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作（filter对象只会创建一次，init方法也只会执行一次）。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象，如下图所示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="comment">// 获取初始化参数</span></span><br><span class="line">    String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line">    <span class="comment">// 输出初始化参数</span></span><br><span class="line">    System.out.println(<span class="string">"网站名称: "</span> + site); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>public void destroy()</code>：Servlet容器在销毁过滤器实例前调用该方法，在该方法中释放Servlet过滤器占用的资源</p>
</li>
</ul>
<h2 id="web-xml配置参数"><a href="#web-xml配置参数" class="headerlink" title="web.xml配置参数"></a>web.xml配置参数</h2><ul>
<li><code>&lt;filter&gt;</code>指定一个过滤器。</li>
<li><code>&lt;filter-name&gt;</code>用于为过滤器指定一个名字，该元素的内容不能为空。</li>
<li><code>&lt;filter-class&gt;</code>元素用于指定过滤器的完整的限定类名。</li>
<li><code>&lt;init-param&gt;</code>元素用于为过滤器指定初始化参数，它的子元素<code>&lt;param-name&gt;</code>指定参数的名字，<code>&lt;param-value&gt;</code>指定参数的值。</li>
<li>在过滤器中，可以使用FilterConfig接口对象来访问初始化参数。</li>
<li><code>&lt;filter-mapping&gt;</code>元素用于设置一个Filter 所负责拦截的资源。一个Filter拦截的资源可通过两种方式来指定：Servlet 名称和资源访问的请求路径</li>
<li><code>&lt;filter-name&gt;</code>子元素用于设置filter的注册名称。该值必须是在<code>&lt;filter&gt;</code>元素中声明过的过滤器的名字</li>
<li><code>&lt;url-pattern&gt;</code>设置 filter 所拦截的请求路径(过滤器关联的URL样式)</li>
<li><code>&lt;servlet-name&gt;</code>指定过滤器所拦截的Servlet名称。</li>
</ul>
<p><code>&lt;dispatcher&gt;</code>指定过滤器所拦截的资源被Servlet容器调用的方式，可以是REQUEST、INCLUDE、FORWARD和ERROR之一，默认REQUEST。用户可以设置多个<code>&lt;dispatcher&gt;</code>子元素用来指定Filter对资源的多种调用方式进行拦截。<code>&lt;dispatcher&gt;</code>子元素可以设置的值及其意义？？？</p>
<ul>
<li>REQUEST：当用户直接访问页面时，Web容器将会调用过滤器。如果目标资源是通过RequestDispatcher的include()或forward()方法访问时，那么该过滤器就不会被调用。</li>
<li>INCLUDE：如果目标资源是通过RequestDispatcher的include()方法访问时，那么该过滤器将被调用。除此之外，该过滤器不会被调用。</li>
<li>FORWARD：如果目标资源是通过RequestDispatcher的forward()方法访问时，那么该过滤器将被调用，除此之外，该过滤器不会被调用。</li>
<li>ERROR：如果目标资源是通过声明式异常处理机制调用时，那么该过滤器将被调用。除此之外，过滤器不会被调用。</li>
</ul>
<p>过滤器的常见功能是可以完成编码过滤及登陆验证</p>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>当一个Servlet抛出一个异常时，Web容器在使用了exception-type元素的web.xml中搜索与抛出异常类型相匹配的配置。您必须在web.xml中使用error-page元素来指定对特定异常或HTTP状态码作出相应的Servlet调用，例如<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- error-code 相关的错误页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>403<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- exception-type 相关的错误页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span></span><br><span class="line">          javax.servlet.ServletException</span><br><span class="line">    <span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.io.IOException<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 对所有的异常有一个通用的错误处理程序 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorHandler<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>javax.servlet.error.status_code</code>：该属性给出状态码，状态码可被存储，并存储为java.lang.Integer</li>
<li><code>javax.servlet.error.exception_type</code>：该属性给出异常类型的信息，异常类型可被存储，并存储为java.lang.Class </li>
<li><code>javax.servlet.error.message</code>：该属性给出确切错误消息的信息，信息可被存储，并存储为java.lang.String</li>
<li><code>javax.servlet.error.request_uri</code>：该属性给出有关URL调用Servlet 的信息，信息可被存储，并存储为java.lang.String</li>
<li><code>javax.servlet.error.exception</code>：该属性给出异常产生的信息，信息可被存储，并存储为java.lang.Throwable </li>
<li><code>javax.servlet.error.servlet_name</code>：该属性给出Servlet的名称，名称可被存储，并存储为java.lang.String</li>
</ul>
<p>在理解异常的时候碰到一个问题<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Throwable throwable = (Throwable)request.getAttribute(<span class="string">"javax.servlet.error.exception"</span>);</span><br><span class="line">Integer statusCode = (Integer)request.getAttribute(<span class="string">"javax.servlet.error.status_code"</span>);</span><br><span class="line">String servletName = (String)request.getAttribute(<span class="string">"javax.servlet.error.servlet_name"</span>);</span><br></pre></td></tr></table></figure></p>
<p>一直没想明白：为什么request中会莫名多出来<code>javax.servlet.error.***</code>属性，后来查找资料，流程终于理清、</p>
<p>一个用来向服务器提供客户端请求信息的对象。servlet container产生一个ServletRequest，然后将它作为参数传递给servlet的service方法</p>
<p>属性值可以通过两种方法设置: servlet container可以设置属性,以便请求的特定信息可以被访问；属性同样可以使用setAttribute()方法进行设置。这可以在调用RequestDispatcher之前将信息嵌入到request中</p>
<p>因此如果输入错误的URL，没有对应的Servlet，servlet container就会产生404，并设置<code>javax.servlet.error.status_code</code>，此时由于存在处理异常的servlet，就会调用设置了状态码的ServletRequest传递给该Servlet，接着做出针对该状态码的行为</p>
<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>Cookie是存储在客户端计算机上的文本文件，并保留了各种跟踪信息</p>
<p>识别返回用户包括三个步骤：</p>
<ul>
<li>服务器脚本向浏览器发送一组Cookie。例如：姓名、年龄或识别号码等。</li>
<li>浏览器将这些信息存储在本地计算机上，以备将来使用。</li>
<li>当下一次浏览器向Web服务器发送任何请求时，浏览器会把这些Cookie信息发送到服务器，服务器将使用这些信息来识别用户</li>
</ul>
<p>Cookie通常设置在HTTP头信息中。设置Cookie的Servlet会发送头信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: name=xyz; expires=Friday, 04-Feb-07 22:03:38 GMT; </span><br><span class="line">                 path=/; domain=runoob.com</span><br></pre></td></tr></table></figure></p>
<p>Set-Cookie头包含了一个名称值对、一个 GMT 日期、一个路径和一个域。名称和值会被URL编码。expires字段是一个指令，告诉浏览器在给定的时间和日期之后”忘记”该Cookie</p>
<p>如果浏览器被配置为存储 Cookie，它将会保留此信息直到到期日期。如果用户的浏览器指向任何匹配该Cookie的路径和域的页面，它会重新发送Cookie到服务器</p>
<h2 id="设置Cookie"><a href="#设置Cookie" class="headerlink" title="设置Cookie"></a>设置Cookie</h2><p><code>public void setDomain(String pattern)</code>：该方法设置cookie适用的域，例如 runoob.com。<br><code>public String getDomain()</code>：该方法获取cookie适用的域，例如runoob.com。<br><code>public void setMaxAge(int expiry)</code>：该方法设置cookie过期的时间（以秒为单位）。如果不这样设置，cookie只会在当前 session 会话中持续有效。<br><code>public int getMaxAge()</code>：该方法返回cookie的最大生存周期（以秒为单位），默认情况下，-1 表示cookie将持续下去，直到浏览器关闭。<br><code>public String getName()</code>：该方法返回cookie的名称。名称在创建后不能改变。<br><code>public void setValue(String newValue)</code>:该方法设置与cookie关联的值。<br><code>public String getValue()</code>：该方法获取与cookie关联的值。<br><code>public void setPath(String uri)</code>：该方法设置cookie适用的路径。如果您不指定路径，与当前页面相同目录下的（包括子目录下的）所有URL都会返回cookie。<br><code>public String getPath()</code>：该方法获取cookie适用的路径。<br><code>public void setSecure(boolean flag)</code>：该方法设置布尔值，表示cookie是否应该只在加密的（即SSL）连接上发送。<br><code>public void setComment(String purpose)</code>：设置cookie的注释。该注释在浏览器向用户呈现cookie时非常有用。<br><code>public String getComment()</code>：获取cookie的注释，如果cookie没有注释则返回null。</p>
<h2 id="读取Cookie"><a href="#读取Cookie" class="headerlink" title="读取Cookie"></a>读取Cookie</h2><p>要读取Cookie，您需要通过调用HttpServletRequest的getCookies()方法创建一个 javax.servlet.http.Cookie对象的数组。然后循环遍历数组，并使用getName()和getValue()方法来访问每个cookie和关联的值</p>
<h2 id="删除Cookie"><a href="#删除Cookie" class="headerlink" title="删除Cookie"></a>删除Cookie</h2><p>删除Cookie是非常简单的</p>
<ul>
<li>读取一个现有的cookie，并把它存储在Cookie对象中。</li>
<li>使用setMaxAge()方法设置cookie的年龄为零，来删除现有的cookie。</li>
<li>把这个cookie添加到响应头。</li>
</ul>
<h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><p>HTTP是一种”无状态”协议，这意味着每次客户端检索网页时，客户端打开一个单独的连接到 Web服务器，服务器不保留之前客户端请求的任何记录</p>
<p>以下三种方式来维持Web客户端和Web服务器之间的session会话</p>
<ul>
<li>Web服务器可以分配一个唯一的session会话ID作为每个Web客户端的cookie，对于客户端的后续请求可以使用接收到的cookie来识别。这可能不是一个有效的方法，因为很多浏览器不支持cookie</li>
<li><p>隐藏的表单字段。一个Web服务器可以发送一个隐藏的HTML表单字段，以及一个唯一的session 会话ID，如下所示。该条目意味着，当表单被提交时，指定的名称和值会被自动包含在GET或 POST 数据中。每次当Web浏览器发送请求时，session_id值可以用于保持不同的Web浏览器的跟踪。这可能是一种保持session会话跟踪的有效方式，但是点击常规的超文本链接（<code>&lt;A HREF...&gt;</code>）不会导致表单提交，因此隐藏的表单字段也不支持常规的session会话跟踪。<br><code>&lt;input type=&quot;hidden&quot; name=&quot;sessionid&quot; value=&quot;12345&quot;&gt;</code></p>
</li>
<li><p>URL重写:您可以在每个URL末尾追加一些额外的数据来标识session会话，服务器会把该session会话标识符与已存储的有关session会话的数据相关联例如，<code>http://w3cschool.cc/file.htm;sessionid=12345</code>，session会话标识符被附加为sessionid=12345，标识符可被Web服务器访问以识别客户端。URL重写是一种更好的维持session会话的方式，它在浏览器不支持cookie时能够很好地工作，但是它的缺点是会动态生成每个URL来为页面分配一个session 会话 ID，即使是在很简单的静态HTML页面中也会如此</p>
</li>
</ul>
<h2 id="HTTPSession"><a href="#HTTPSession" class="headerlink" title="HTTPSession"></a>HTTPSession</h2><p>除了上述的三种方式，Servlet还提供了HttpSession接口，该接口提供了一种跨多个页面请求或访问网站时识别用户以及存储有关用户信息的方式</p>
<p>Servlet容器使用这个接口来创建一个HTTP客户端和HTTP服务器之间的session会话。会话持续一个指定的时间段，跨多个连接或页面请求</p>
<p>通过调用HttpServletRequest的公共方法getSession()来获取HttpSession对象</p>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><p>Java类库的全部功能对Servlet来说都是可用的。它可以通过sockets和RMI机制与applets、数据库或其他软件进行交互。即使用JDBC来进行了解数据库并访问数据</p>
<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><p>Servlet可以与HTML form标签一起使用，来允许用户上传文件到服务器。上传的文件可以是文本文件或图像文件或任何文档</p>
<p>Servlet3.0已经内置了文件上传这一特性，开发者不再需要将Commons FileUpload组件导入到工程中去（在Servlet包的META-INF文件下可以查看版本）</p>
<h1 id="网页重定向"><a href="#网页重定向" class="headerlink" title="网页重定向"></a>网页重定向</h1><p>当文档移动到新的位置，我们需要向客户端发送这个新位置时，我们需要用到网页重定向。当然，也可能是为了负载均衡，或者只是为了简单的随机，这些情况都有可能用到网页重定向</p>
<p>重定向请求到另一个网页的最简单的方式是使用response对象的sendRedirect()方法；也可以通过把setStatus()和setHeader()方法一起使用来达到同样的效果</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://www.runoob.com/servlet/servlet-intro.html" target="_blank" rel="noopener">菜鸟教程</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a>
          
            <a href="/tags/servlet/" rel="tag"><i class="fa fa-tag"></i> servlet</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/08/MIT-6-828-book-xv6-Chapter-0/" rel="next" title="MIT 6.828 book_xv6:Chapter 0">
                <i class="fa fa-chevron-left"></i> MIT 6.828 book_xv6:Chapter 0
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/13/MySQL-《表》/" rel="prev" title="表">
                表 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">123xzy</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">199</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">80</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/123xzy" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xzy-71-59/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-globe"></i>ZhiHu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:xzy0320@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#简介"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#生命周期"><span class="nav-number">2.</span> <span class="nav-text">生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#init"><span class="nav-number">2.1.</span> <span class="nav-text">init()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#service"><span class="nav-number">2.2.</span> <span class="nav-text">service()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#destroy"><span class="nav-number">2.3.</span> <span class="nav-text">destroy()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表单数据"><span class="nav-number">3.</span> <span class="nav-text">表单数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表单"><span class="nav-number">3.1.</span> <span class="nav-text">表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GET"><span class="nav-number">3.2.</span> <span class="nav-text">GET</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#POST"><span class="nav-number">3.3.</span> <span class="nav-text">POST</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#客户端HTTP请求"><span class="nav-number">4.</span> <span class="nav-text">客户端HTTP请求</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP头信息"><span class="nav-number">4.1.</span> <span class="nav-text">HTTP头信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#读取头信息"><span class="nav-number">4.2.</span> <span class="nav-text">读取头信息</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#服务器HTTP响应"><span class="nav-number">5.</span> <span class="nav-text">服务器HTTP响应</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#响应报头"><span class="nav-number">5.1.</span> <span class="nav-text">响应报头</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置响应报头"><span class="nav-number">5.2.</span> <span class="nav-text">设置响应报头</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP状态码"><span class="nav-number">6.</span> <span class="nav-text">HTTP状态码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#状态码含义"><span class="nav-number">6.1.</span> <span class="nav-text">状态码含义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置状态码"><span class="nav-number">6.2.</span> <span class="nav-text">设置状态码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#过滤器"><span class="nav-number">7.</span> <span class="nav-text">过滤器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#web-xml配置参数"><span class="nav-number">7.1.</span> <span class="nav-text">web.xml配置参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#异常处理"><span class="nav-number">8.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cookie"><span class="nav-number">9.</span> <span class="nav-text">Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#设置Cookie"><span class="nav-number">9.1.</span> <span class="nav-text">设置Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#读取Cookie"><span class="nav-number">9.2.</span> <span class="nav-text">读取Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除Cookie"><span class="nav-number">9.3.</span> <span class="nav-text">删除Cookie</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Session"><span class="nav-number">10.</span> <span class="nav-text">Session</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTPSession"><span class="nav-number">10.1.</span> <span class="nav-text">HTTPSession</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库"><span class="nav-number">11.</span> <span class="nav-text">数据库</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件上传"><span class="nav-number">12.</span> <span class="nav-text">文件上传</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网页重定向"><span class="nav-number">13.</span> <span class="nav-text">网页重定向</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考"><span class="nav-number">14.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">123xzy</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  :<span id="busuanzi_value_site_uv"></span>
</span>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  


  

  

</body>
</html>
